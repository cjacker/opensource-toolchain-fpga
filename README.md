# OpenSource toolchain for FGPA

A **field-programmable gate array (FPGA)** is an integrated circuit designed to be configured by a customer or a designer after manufacturing â€“ hence the term field-programmable.

FPGA is not a CPU or MCU or special-purpose IC whose configuration is set and sealed by a manufacturer and cannot be modified, it's a general purpose IC that can be programmed (configured) for specific use after it has been manufactured. FPGA contain adaptive logic modules (ALMs) and logic elements (LEs) connected via programmable interconnects. These blocks create a physical array of logic gates that can be customized to perform specific computing tasks. 

FPGA programming is not like "programming" in the usual sense, such as C programming. FPGA programming is "creating hardware architecture to perform specific tasks". that's to say, by FPGA programming, you can config FPGA working as a CPU or as a hardware accelerator of specific algorithm.

And the programming language used with FPGA is far different from various programming languages we are already similar with. to program FPGAs, you use specific hardware description languages such as VHDL or Verilog, it describes the structure and behavior of electronic circuits, and most commonly, digital logic circuits. 

for more information of FPGA, you can refer to https://en.wikipedia.org/wiki/Field-programmable_gate_array.

A programming language toolchain (such as C programming language) we known before is a 'translator' to translate the source codes to target binaries. the principles would be similar for FPGA, the toolchain of FPGA also works as a 'translator' to translate the source codes of hardware description languages (such as verilog) to target binaries (it called as 'bitstream file'), and the compilation process for FPGA consists of 'synthesis' and 'place and route' (P&R), and the final bitstream file will be uploaded to FPGA by a flashing tool.

Until a few years ago, developing for FPGAs required the use of proprietary locked-down tools, but in the last few years, the satuation changed, open-source FPGA tools such as Yosys nextpnr have come flooding out. 

There is a good and not too long article describing the design of Yosys/Nextpnr opensource FPGA toolchain very clearly and briefly, please refer to https://arxiv.org/pdf/1903.10407.pdf. 

This tutorial will focus on this opensource toolchain of FPGA. there are also some other opensource FPGA toolchains or frameworks, most of them are based on yosys/nextpnr, you do not need to care about them at this time.

# Hardware requirements

* A FPGA development board, which can be well supported by yosys/nextpnr.
  - Lattice iCE40 or ECP5 family. for example, iCE40 ICEBreaker, ICESugar, ICESugar nano board, or ECP5 Colorlight series board.
  - Gowin LittleBee family. for example, Tang nano 1k/4k/9k board.
* Optional, a JTAG adapter.
  - most of FPGA development board already integrated it.


# Toolchain overview:

* Synthesis: yosys
* Place and route: nextpnr with multiple backend
* Flashing tool: various different tools for different FPGA family

As mentioned above, the article "[Yosys+nextpnr: an Open Source Framework from
Verilog to Bitstream for Commercial FPGAs](https://arxiv.org/pdf/1903.10407.pdf)" describes Yosys/Nextpnr framework very clearly and briefly, I suggest you must read it first before continuing, then you should be able to understand the architechture of the toolchain and the input/output of every step.

# Yosys
Input: verilog source files, Ouput: netlist json file

# Nextpnr
Input: netlist json file generated by yosys and specific phisical constraints file, Output: bitstream file

# Flashing






